<!DOCTYPE html >
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
pre { font-family: monospace; color: blue; }
span.pre { font-family: monospace; color: blue; }
/* nice normal tables: */
table[border="1"] th, table[border="1"] td {
        padding: 5px;
        border: 1px;
	border-color: gray;
        border-style: solid;
        white-space: nowrap;
       /* text-align: right*/
}

table[border="1"] {
	margin: 4px;
        border: 1px; border-style: solid;
        border-spacing: 0px;
/*      background-color: ack; */
        empty-cells: show;
	border-collapse: collapse;
}

</style>

</head>
<body>
<h1>Programming in 5D</h1>
<h2>Gentle Introduction</h2>
<p>For a gentle introduction, see <a href="../tutorial/index.html">5D Tutorial</a>.</p>
<h2>Source Code Character Set</h2>
<p>The Source Code Character Set is supposed to be UTF-8.</p>
<p>The first 128 characters are used for the following:</p>
<table border="1">
<tr><th>Code</th><th>Usage</th></tr>
<tr><td>NUL</td><td>Has no meaning</td></tr>
<tr><td>SOH, STX, ETX, EOT</td><td>Have no meaning</td></tr>
<tr><td>ENQ, ACK, BEL, BS</td><td>Have no meaning</td></tr>
<tr><td>TAB</td><td>Significant Whitespace</td></tr>
<tr><td>LF</td><td>Newline, used for indentation tracking</td></tr>
<tr><td>VT</td><td>Has no meaning</td></tr>
<tr><td>FF</td><td>Has no meaning</td></tr>
<tr><td>CR</td><td>Ignored (!!!)</td></tr>
<tr><td>SO, SI, DLE, DC1</td><td>Have no meaning</td></tr>
<tr><td>DC2, DC3, DC4</td><td>Have no meaning</td></tr>
<tr><td>NAK, SYN, ETB</td><td>Have no meaning</td></tr>
<tr><td>CAN, EM, SUB</td><td>Have no meaning</td></tr>
<tr><td>ESC</td><td>Has no meaning</td></tr>
<tr><td>FS, GS, RS, US</td><td>Have no meaning</td></tr>
<tr><td>space</td><td>Significant Whitespace</td></tr>
<tr><td>!</td><td>Part of identifiers</td></tr>
<tr><td>"</td><td>Marks literal Str</td></tr>
<tr><td>#</td><td>Special literal values</td></tr>
<tr><td>$</td><td>Operator</td></tr>
<tr><td>%</td><td>Operator</td></tr>
<tr><td>&amp;</td><td>Operator</td></tr>
<tr><td>'</td><td>Marks quoted expression</td></tr>
<tr><td>(</td><td>Grouping</td></tr>
<tr><td>)</td><td>Grouping</td></tr>
<tr><td>*</td><td>Operator</td></tr>
<tr><td>+</td><td>Operator</td></tr>
<tr><td>,</td><td>Operator</td></tr>
<tr><td>-</td><td>Operator</td></tr>
<tr><td>.</td><td>Operator or part of a floating-point number</td></tr>
<tr><td>/</td><td>Operator</td></tr>
<tr><td>0..9</td><td>Part of numbers or (identifiers starting from the second place)</td></tr>
<tr><td>:</td><td>Operator</td></tr>
<tr><td>;</td><td>Operator</td></tr>
<tr><td>&lt;</td><td>Operator</td></tr>
<tr><td>=</td><td>Operator</td></tr>
<tr><td>></td><td>Operator</td></tr>
<tr><td>?</td><td>Part of identifiers</td></tr>
<tr><td>@</td><td>Keywords</td></tr>
<tr><td>A..Z</td><td>Part of identifiers</td></tr>
<tr><td>[</td><td>List macro</td></tr>
<tr><td>\</td><td>Abstraction</td></tr>
<tr><td>]</td><td>List macro</td></tr>
<tr><td>^</td><td>Operator</td></tr>
<tr><td>_</td><td>Operator</td></tr>
<tr><td>`</td><td>Operator ?</td></tr>
<tr><td>a..z</td><td>Part of identifiers</td></tr>
<tr><td>{</td><td>Literal Sets, Dictionaries</td></tr>
<tr><td>|</td><td>Operator</td></tr>
<tr><td>}</td><td>Literal Sets, Dictionaries</td></tr>
<tr><td>~</td><td>Operator</td></tr>
<tr><td>DEL</td><td>Has no meaning</td></tr>
</table>
<hr/>
<h2>Module System</h2>
<p>In order to import modules, use the <span class="pre">import</span> function.</p>
<h2>import 'name</h2>
<p>The <span class="pre">import</span> function will:</p>
<ul>
<li>ensure that the given module is loaded</li>
<li>import the symbols of the module that are on the whitelist and not on the blacklist into the current namespace</li>
</ul>
<p>Keyword arguments are:</p>
<ul>
<li>@whitelist:['a 'b 'c]     in order to specify a whitelist. If not specified (or if empty), this means "all symbols of the module"</li>
<li>@blacklist:['c 'd 'e]     in order to specify a blacklist.</li>
<li>@prefix:"foo"             in order to prefix all defined symbols by the given Str.</li>
</ul>
<p>(In fact, <span class="pre">import</span> is shorthand for a combination of define (or let) and <span class="pre">requireModule</span>).</p>
<p>Example:</p>
<pre>
import 'Arithmetic
cos 2
</pre>
<hr/>
<h2>Foreign Function Interface</h2>
<p>You can load functions of shared libraries:</p>
<p>Example:</p>
<pre>
define puts requireSharedLibrary "/lib/x86_64-linux-gnu/libc.so.6" 'Cip "puts"
runIO (puts "Hello world")
</pre>
<p>What this does is:</p>
<p>- load the library with the given file name.</p>
<p>- give a function signature (usually as a Symbol).</p>
<p>- give the name of the function to load (usually as a Str).</p>

<p>The function signature is a symbol whose str consists of the following characters:</p>
<nl>
<li>The calling convention, C.</li>
<li>The type of the return value.</li>
<li>The type of each of the parameters of the C function, in order.</li>
</nl>

<p>Result is a function which can be run in a world.</p>

<p>Possible type specifiers:</p>
<table border="1">
<tr><th>Letter</th><th>Meaning</th></tr>
<tr><td>S</td><td>String or nil</td></tr>
<tr><td>s</td><td>String</td></tr>
<tr><td>P</td><td>(non-String) pointer or nil</td></tr>
<tr><td>p</td><td>(non-String) pointer</td></tr>
<tr><td>i</td><td>int or smaller</td></tr>
<tr><td>l</td><td>long</td></tr>
<tr><td>v</td><td>void</td></tr>
<tr><td>L</td><td>long long</td></tr>
<tr><td>f</td><td>float</td></tr>
<tr><td>d</td><td>double</td></tr>
</table>
