#ifndef __MATRIX_H
#define __MATRIX_H
/*
5D vector analysis program
Copyright (C) 2011  Danny Milosavljevic
This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.
You should have received a copy of the GNU General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

namespace Linear_Algebra {

template<typename T, int RowCount, int ColumnCount>
struct Matrix {
	T items[RowCount][ColumnCount];
};

template<typename T, int RowCount, int ColumnCount>
Matrix<T, RowCount, ColumnCount> operator+(const Matrix<T,RowCount,ColumnCount>& a, const Matrix<T,RowCount,ColumnCount>& b) {
	Matrix<T,RowCount,ColumnCount> result;
	for(int i = 0; i < RowCount; ++i)
		for(int j = 0; j < ColumnCount; ++j)
			result.items[i][j] = a.items[i][j] + b.items[i][j];
	return(result);
}

template<typename T, int RowCount, int ColumnCount>
Matrix<T,RowCount,ColumnCount> operator-(const Matrix<T,RowCount,ColumnCount>& a, const Matrix<T,RowCount,ColumnCount>& b) {
	Matrix<T,RowCount,ColumnCount> result;
	for(int i = 0; i < RowCount; ++i)
		for(int j = 0; j < ColumnCount; ++j)
			result.items[i][j] = a.items[i][j] - b.items[i][j];
	return(result);
}

template<typename T, int RowCount, int ColumnCount>
Matrix<T,RowCount,ColumnCount> operator-(const Matrix<T,RowCount,ColumnCount>& b) {
	Matrix<T,RowCount,ColumnCount> result;
	for(int i = 0; i < RowCount; ++i)
		for(int j = 0; j < ColumnCount; ++j)
			result.items[i][j] = - b.items[i][j];
	return(result);
}

template<typename T, int RowCount, int ColumnCount>
Matrix<T,RowCount,ColumnCount> transpose(const Matrix<T,ColumnCount,RowCount>& a) {
	Matrix<T,RowCount,ColumnCount> result;
	for(int i = 0; i < RowCount; ++i)
		for(int j = 0; j < ColumnCount; ++j)
			result.items[i][j] = a.items[j][i];
	return(result);
}

template<typename T, int RowCount, int ColumnCount, int CommonCount>
Matrix<T,RowCount,ColumnCount> operator*(const Matrix<T,RowCount,CommonCount>& a, const Matrix<T,CommonCount,ColumnCount>& b) {
	Matrix<T,RowCount,ColumnCount> result;
	for(int i = 0; i < RowCount; ++i)
		for(int j = 0; j < ColumnCount; ++j) {
			T value; /* TODO neutral initializer */
			for(int k = 0; k < CommonCount; ++k)
				value += a.items[i][k] * b.items[k][j];
			result.items[i][j] = value;
		}
	return(result);
}

/* TODO Determinant,
        GauÃŸ elimination */

}; /* namespace Linear_Algebra; */

#endif /*ndef __MATRIX_H*/
